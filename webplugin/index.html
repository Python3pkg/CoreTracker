<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>CoreTracker </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- Import scripts in this specific order -->
    <script src="/webplugin/js/jquery.min.js"></script>
    <script src="/webplugin/js/jquery-ui.min.js"></script>
    <script src="/webplugin/js/coretracker.js"></script>
    <script src="/webplugin/js/bootstrap.min.js"></script>
    <script src="/webplugin/js/spin.min.js"></script>
  
    <link rel="stylesheet" href="/webplugin/css/jquery-ui.css" />

    <script src="/webplugin/js/ete.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/queue.v1.min.js"></script>

    <script src="/webplugin/js/d3svg.js"></script>

    <script>
      /* YOU MUST SET THIS VARIABLE */
      var ete_webplugin_URL = "/wsgi/wsgi.py"
    </script>
    <link rel="stylesheet" type="text/css" href="/webplugin/css/ete.css" >
    <link rel="stylesheet" type="text/css" href="/webplugin/css/bootstrap.min.css" >
    <link rel="stylesheet" type="text/css" href="/webplugin/css/coretracker.css" >
    <link rel="icon" href="/webplugin/image/favicon.ico" />

  </head>
  <body>
  	<h1><b>CoreTracker</b></h1>

    <div id="block">
    <form enctype="multipart/form-data" class="ui-grid-a" >
    <fieldset>
    <legend> Input data </legend>
	<div data-role="fieldcontain" class="leftalign">
	<table>
	<tr>
		<td><label for="stree">Species tree: </label></td>
 		<td><input type="file" name="stree" id="stree"/></td>
 		
	</tr>

	<tr>
		<td><label for="sseq">Protein alignment: </label></td>
 		<td><input type="file" name="sseq" id="sseq"/></td>
 	    <td><label><input type="checkbox" /> Already aligned</label></td>
 	    
	</tr>

	<tr>
		<td><label for="gseq">Dna alignment: </label></td>
 		<td><input type="file" name="gseq" id="gseq"/></td>
 		
	</tr>
	</table>
	</div>
	</fieldset>

	<fieldset>
    <legend>Filtering Parameters </legend>
    <div data-role="fieldcontain" class="leftalign">
    <table>
    <tr>
    	<td><label for="idfilter">Required identity (%): </label></td>
	    <td><input type="text" name="idfilter" id="idfilter" value="70"/></td> 
  	</tr>
	<tr>
		<td><label for="icfilter">Required IC (%): </label></td>
 		<td><input type="text" name="icfilter" id="icfilter" value="70"/></td>
  	</tr>
  	<tr>
		<td><label for="gapfilter">GAP filtering (%): </label></td>
 		<td><input type="text" name="gapfilter" id="gapfilter" value="70"/></td>
	</tr> 		
	<tr>
		<td><label for="gcode">Default Genetic code :</label></td>
 		<td>
 			
		<select id="gcode" name="gcode">
          <option value="1">Standard Code (1)</option>
          <option value="2">Vertebrate mitochondrial code (2)</option>
          <option value="3">Yeast mitochondrial code (3)</option>
          <option value="4">Mold Mitochondrial code (4)</option>
          <option value="5">Invertebrate Mitochondrial code (5)</option>
          <option value="6">Ciliate Nuclear code (6)</option>
          <option value="9">Echinoderm Mitochondrial code (9)</option>
          <option value="10">Euplotid Nuclear code (10)</option>
          <option value="11"> Bacteria, Archaeal and Plant plastid code (11)</option>
          <option value="12">Alternative Yeast nuclear code (12)</option>
         </select>

 		</td>
	</tr>
	</table>
	</div>
	</fieldset>

	<div id="showadvanced">Advanced Settings <span class="ui-icon ui-icon-carat-1-s"></span></div>

	<fieldset id="advanced-drop">
    <legend> Advanced Settings </legend>
    <div data-role="fieldcontain" class="leftalign">
    <table>
 	<tr>
		<td><label for="trna">tRNA sequences </label></td>
 		<td><input type="file" name="trna" id="trna"/></td>
	</tr>
  	<tr>
		<td><label for="includeAA"> include AAs :  <span class="ui-icon  ui-icon-help" title="Enter the one-character representation of AA to which reassignment will be considered. By default, all amino acids are considered"> </span> </label></td>
 		<td><input type="text" name="includeAA" id="includeAA" value="GAVLISTDENQKHWYFPMCR"/></td>
	</tr>
	  <tr>
		<td><label for="aamajthresh">&#915; <span class="ui-icon  ui-icon-help" title="Frequency threshold required to consider an amino acid majoritary in a column for the filtered alignment "> </span></label></td>
 		<td><input type="text" name="aamajthresh" id="aamajthresh" value="50"/></td>
	</tr> 	
	<tr>
		<td><label for="freqthresh">&#916; <span class="ui-icon  ui-icon-help" title="Minimum frequency for which the filtered alignment of a sequence is improved over its raw alignment in a pairwise alignement with every other sequences, to consider that sequence as a potential suspect of reassignment"> </span></label></td>
 		<td><input type="text" name="freqthresh" id="freqthresh" value="40"/></td>
	</tr>
	<tr>
		<td><label for="ctthresh">&#923; <span class="ui-icon  ui-icon-help" title="Minimal number of substitution per AA in the raw alignment in order to consider a reassignment"> </span></label></td>
 		<td><input type="text" name="ctthresh" id="ctthresh" value="3"/></td>
	</tr>
	<tr>
		<td><label for="limsuspected">Suspected species only <span class="ui-icon  ui-icon-help" title="Limit all analysis to suspected species only. This will be faster but less accurate"> </span></label></td>
 		<td><input name="limsuspected" id="limsuspected" type="checkbox" checked /></td>
	</tr>  		
	</table>
	</div>
	</fieldset>

	<br><br>
	<div id="submitbutton">
	<input type="submit" /><br>
	<span id="spin"></span>
	<span id="show-error"></span>
	</div>

	</form>

  <div id="show-link"></div>
    </div>
    <!-- This layer must be called "popup" -->
  
    <div id="popup"></div>

   <!--
  
    <div style='text-align: left;'>
      <div style="clear:both;" >
        <select id="alignment" name="alignment">
          <option value="ID_filtered">Filtered and identity removed</option>
          <option value="filtered">Filtered</option>
          <option value="global">Global</option>
          <option value="ungapped">Gap removed</option>
        </select>
        <input type='submit' value='Show Tree'  onClick='$("#ete_tree").show();coretracker(random_tid(),"#img1", $("#alignment").val());'>
        <input type='button' value='Clear' onClick='$("#ete_tree").hide();'>
      </div>
    </div>
    
    <br>
    <div class="ete_image">
      <br>
      <div id="ete_tree">
        <textarea id="treenewick" style='width: 800px; height: 90px; vertical-align:middle;'>  </textarea>
        <br><br>
        <div id="img1"></div>    </div>
        <br><br>
        <div id="graph" >
          <div class="ui-widget">
            <label for="aa">Amino Acid: </label>
            <input id="aa">
          </div>
          <br>
          <div id ="line1">
            <div id="aafreq"> <span class="splist"><ul id="aafreqlist"></ul></span></div>
            <div id="aause"> <span class="splist"><ul id="aauselist"></ul></span></div>
          </div><hr>
          <br>
          <div class="ui-widget">
            <label for="gene">Specie: </label>
            <input id="gene">
          </div>
          <br>
            <div id="line2">
              <div id="identity"></div><br>
            </div>
          </div>
      </div>
    
    
      <script>
      var similarity = "/tmp/similarity.json";
      var aafrequency = "/tmp/aafrequency.json";
      var aause = "/tmp/aause.json";
      firstline(aafrequency, aause);
      secondline(similarity);
      </script>
      -->
    </body>
  </html>